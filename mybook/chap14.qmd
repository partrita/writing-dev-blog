# 14장 "벤치마크 및 테스트 결과(Benchmarks and Test Results)" 패턴

# 이 장에서 다루는 내용

- 다양한 형태의 벤치마크와 테스트 결과를 공유하는 블로그 포스트
- 목적과 독자층
- 다양한 저자들의 접근 방식
- 성공적인 "벤치마크 및 테스트 결과" 포스트의 핵심 요소
- "벤치마크 및 테스트 결과" 포스트 작성 시 유의사항

엔지니어들은 숫자를 좋아하지만 동시에 벤치마크 결과에 대해 매우 회의적입니다. 따라서 이 패턴의 글을 쓸 때는 정직성, 재현 가능성, 그리고 현실성을 확보하는 것이 무엇보다 중요합니다.

벤치마크 글은 크게 세 가지 유형으로 나뉩니다:
1.  **자사 제품 vs 경쟁사 제품:** 가장 논란이 되기 쉽지만 효과적인 홍보 수단.
2.  **자사 제품을 활용한 제3의 기술 테스트:** 신형 하드웨어나 클라우드 인프라 등을 테스트하며 자사 제품을 자연스럽게 노출.
3.  **독립적인 테스트:** 자사 제품과 무관한 기술들을 비교. 가장 신뢰받는 유형.

# 14.1 목적 (Purpose)

### 14.1.1 벤치마케팅 (Benchmarketing)
경쟁사 대비 자사 제품의 우월함을 숫자로 증명하여 홍보합니다. 독자들의 의심을 사기 쉬우므로 철저한 검증이 필요합니다.

### 14.1.2 미묘한 벤치마케팅 (Subtle benchmarketing)
자사 제품을 '도구'로 사용하여 다른 흥미로운 기술(예: 신규 CPU)을 테스트합니다. 실용적이고 거부감이 적은 마케팅 방식입니다.

### 14.1.3 커뮤니티 봉사 (Community service)
순수한 호기심이나 공익을 위해 기술들을 비교 분석합니다. 가장 객관적이고 신뢰받는 콘텐츠입니다.

# 14.2 독자 (Audience)

-   **유형 1:** 해당 회사 기술에 관심 있는 사람, 도입을 검토 중인 사람.
-   **유형 2:** 테스트 대상 기술(예: 하드웨어)에 관심 있는 사람 + 회사 기술에 관심 있는 사람.
-   **유형 3:** 모든 기술 애호가. (가장 넓은 독자층)

# 14.3 "벤치마크 및 테스트 결과" 블로그 포스트 사례

### 14.3.1 AWS Graviton2: Arm Brings Better Price-Performance... (Michał Chojnowski)
AWS의 ARM 기반 인스턴스(Graviton2)가 x86 대비 가성비가 좋음을 ScyllaDB를 이용해 증명합니다. 테스트 환경과 과정을 상세히 공개하여 신뢰를 높였습니다.

### 14.3.2 The Relative Performance of C and Rust (Bryan Cantrill)
C와 Rust 프로그램의 성능을 비교 분석하며, Rust의 BTree 자료구조가 캐시 효율성 면에서 유리함을 밝혀냅니다. 독립적인 테스트로서 높은 가치를 지닙니다.

### 14.3.3 Redpanda vs. Kafka: A Performance Comparison (Tristan Stevens)
자사 제품(Redpanda)이 경쟁사(Kafka)보다 성능이 뛰어남을 보여줍니다. 경쟁사에게 유리한 조건을 주는 등 공정성을 기하려 노력했으나, 논란을 피할 수는 없었습니다.

### 14.3.4 The Effect of Switching to TCMalloc on RocksDB Memory Use (Dmitry Vorobev)
메모리 할당자를 TCMalloc으로 교체했을 때의 메모리 절감 효과를 다룹니다. 테스트 세부 사항보다는 기술적 원리 설명에 집중하여 교육적 가치를 높였습니다.

### 14.3.5 How Much Does Rust’s Bounds Checking Actually Cost? (Alana Marzoev)
Rust의 경계 검사(Bounds Checking) 비용을 측정합니다. 특정 사용 사례에 대한 결과임에도 일반적인 결론을 도출하려 한 점은 아쉽지만, 측정 방법론은 유용합니다.

# 14.4 특징 (Characteristics)

### 14.4.1 숫자와 시각화 (Numeric and visual)
명확한 차트와 표가 필수적입니다.
-   **스토리텔링:** 차트를 통해 성능 문제 발생이나 개선 효과를 시각적으로 보여줍니다.
-   **데이터 밀도:** 공간 낭비 없이 정보를 꽉 채웁니다.
-   **거짓말 요인(Lie Factor) 제거:** 시각적 크기 변화가 실제 데이터 변화와 일치해야 합니다.

### 14.4.2 유죄 추정의 원칙 (Guilty until proven innocent)
독자들은 기본적으로 조작을 의심합니다.
-   공정한 비교 조건 명시
-   상세한 환경 설정 공개
-   재현 방법 제공
-   제3자의 검증 언급

### 14.4.3 준 학술적 (Quasi academic)
논문과 유사한 구조(초록, 배경, 방법, 결과, 고찰)를 가지며, 한계점을 명시하는 등 객관적이고 공식적인 어조를 사용합니다.

# 14.5 유의사항 (Dos and don'ts)

### 14.5.1 브렌든 그렉의 "Systems Performance" 읽기
벤치마킹의 바이블입니다. 올바른 벤치마킹 방법론을 익히세요.

### 14.5.2 재현 방법 공개하기
신뢰를 얻으려면 독자가 직접 테스트해 볼 수 있도록 소스 코드와 스크립트를 제공해야 합니다.

### 14.5.3 과장하지 말기
차트 축을 조작하거나 결과를 부풀리지 마세요. 온라인 커뮤니티의 검증을 통과하지 못하면 신뢰를 잃습니다.

### 14.5.4 방치하지 말기
오류 지적이나 새로운 환경 변화에 대응하여 글을 지속적으로 업데이트(Update)하세요. 비판에 대응하고 내용을 수정하는 모습을 보여주세요.

### 14.5.5 요점만 명확하게 (Boil it down, spell it out)
복잡한 테스트 과정을 다 보여주려 하지 말고 핵심 결과에 집중하세요.
-   **전면 배치:** 결론을 먼저 말하세요.
-   **비교 용이성:** 결과를 나란히 배치하고 차이를 명확히 보여주세요.
-   **"더 나은 것" 표시:** 높아야 좋은지 낮아야 좋은지 명확히 하세요.
-   **정보 과부하 방지:** 대표적인 시나리오에 집중하고 나머지는 요약하거나 링크로 제공하세요.

# 요약

-   벤치마크 글은 경쟁사 비교, 제3 기술 테스트, 독립적 테스트 등 다양한 유형이 있습니다.
-   엔지니어들은 숫자를 좋아하지만 의심이 많으므로 철저한 검증과 투명성이 필요합니다.
-   올바른 벤치마킹 방법론을 준수하고 재현 가능성을 보장하세요.
-   과장을 피하고, 비판에 열린 태도로 업데이트를 지속하세요.
-   독자가 핵심 결과를 쉽게 파악할 수 있도록 시각화와 요약에 신경 쓰세요.